---
Linux学习
---

# Vim学习

## 1, 常用操作

- 插入命令

命令 | 作用
-- | -----------
a  | 光标在所在字符后插入
A  | 光标在所在行尾插入
i  | 光标在所在字符前插入
I  | 光标在在所在行行首插入
o  | 光标下插入新行
O  | 光标上插入新行

- 定位命令

命令        | 作用
--------- | -----
:set nu   | 设置行号
:set nonu | 取消行号
gg        | 到第一行
G         | 到最后一行
nG        | 到第n行
:n        | 到到n行
$         | 移至行尾
0         | 移至行首

- 删除命令

命令      | 作用
------- | ---------------
x       | 删除光标所在处字符
nx      | 删除光标所在处n个字符
dd      | 删除光标所在行
ndd     | 删除n行
dG      | 删除光标所在行到文件末尾的位置
D       | 删除光标所在行到行尾内容
:n1,n2d | 删除指定范围的行

- 复制

命令  | 作用
--- | --------------
yy  | 复制当前行
nyy | 复制当前行一下n行
dd  | 剪切当前行
ndd | 剪切当前行以下n行
p或P | 粘贴在当前光标所在行下或行上

- 替换或取消

命令 | 作用
-- | --------------------
r  | 取代光标所在处字符
R  | 从光标所在处所开始替换字符,按ESC结束
u  | 取消上一步操作

- 搜索和搜索替换

命令                | 作用
----------------- | -------------------------------
/string           | 搜索指定字, 搜索时忽略大小写:set ic
n                 | 搜索制定字符串的下一个出现位置
:%s/old/new/g     | 全文替换指定字符串(%s为全文, g为不询问, c为询问确认)
:n1,n2s/old/new/g | 在一定范围内替换指定字符串

- 保存和退出

命令              | 作用
--------------- | -----------------------
:w              | 保存修改
:w new_fulename | 另存为指定文件
:wq             | 保存修改并退出
ZZ              | 保存修改并退出
:q!             | 不保存修改退出
:wq!            | 保存修改并退出(文件所有者及root用户可用)

- 导入命令执行结果 `:r !命令`

# 2, 常用命令学习

## 1, 目录处理命令

- 创建目录

> mkdir [-p] 目录名<br>
> p 递归创建, 当在一个不存在的目录下创建目录时使用

- 显示当前目录

> pwd

- 删除空目录

> rmdir 目录名

- 复制文件或目录

> cp [-rp] 原文件或目录 目标目录<br>
> r 复制目录<br>
> p 保留文件属性

- 剪切文件或改名

> mv 原文件或目录 目标目录

- 删除文件

> rm -rf 文件或目录<br>
> r 删除目录<br>
> f 强制执行

## 2, 文件处理命令

- 创建空文件

> touch 文件名

- 显示文件内容

> cat 文件名<br>
> -n 显示行号<br>
> tac 文件名(反向列示)

- 分页显示文件内容 1

> more 文件名<br>
> 空格或f 翻页<br>
> 回车 换行 q或Q 退出

- 分页显示文件内容 2

> less 文件名 (可向上翻页)

- 显示文件前几行

> head 文件名<br>
> -n 指定行数<br>
> 范例: head -n 7 filename

- 查看文件最后几行

> tail 文件名<br>
> -n 指定行数<br>
> -f 动态显示文件末尾内容

## 3, 链接命令

- 生成链接文件

> ln -s 原文件 目标文件<br>
> -s 创建软链接

## 4, 权限管理命令

- 改变文件或目录权限

> chmod [{ugoa}{+-=}{rwx}] 文件或目录<br>
> chmod [mode=421] 文件或目录(r=4, w=2, x=1, rwx=7, rw-=6, r--=4, rwxrw-r--(所有者,所有组,其他人权限))<br>
> -R 递归修改

- 改变文件或目录的所有者

> chown 用户 文件或目录

- 改变文件或目录的所属组

> chgrp 用户组 文件或目录

- 显示,设置文件的缺省权限

> umask [-S]<br>
> -S 以rwx形式显示新建文件缺省权限

## 5, 文件搜索命令

- 文件搜索

> find [搜索范围] [匹配条件]<br>
> 范例:<br>
> 在根目录中查找大于100m的文件<br>
> find / -size 204800<br>
> 在目录/etc中查找init文件<br>
> find /etc -name init (-iname 不区分大小写)<br>
> 在根目录下查找所有者为huang的文件 find /home -user huang

- 在文件资料库中查找文件

> locate [-i] 文件名<br>
> -i 不区分大小写<br>
> updatedb 更新文件资料库

- 搜索命令所在目录及别名信息

> which 命令

- 在文件中搜索字符串匹配的行并输出

> grep -iv 指定字符串 文件<br>
> -i 不区分大小写<br>
> -v 排除指定字符串

## 6, 帮助命令

- 获得帮助信息

> man 命令或配置文件

## 7, 解压缩命令

### .gz

- 压缩 `gzip 文件名` 只可压缩文件,不可压缩目录
- 解压 `gunzip 文件名 或 gzip -d 文件名`

### .tar.gz

- 压缩

> tar [选项] 压缩后文件名 目录<br>
> -c 打包<br>
> -v 显示详细信息<br>
> -f 指定文件名<br>
> -z 打包同时压缩

- 解压

> tar [选项] 文件名<br>
> -x 解包<br>
> -v 显示详细信息<br>
> -f 指定压缩文件<br>
> -z 解压缩

### .zip

- 压缩

> zip [选项] 压缩后文件名 文件或目录<br>
> -r 压缩目录

- 解压

> unzip 压缩文件

### .bz2

- 压缩

> bzip2 [选项] 文件<br>
> -k 产生压缩文件后保留原文件<br>
> tar -cjf 文件名 目录

- 解压

> bunzip2 [选项] 压缩文件<br>
> -k 解压缩后保留原文件<br>
> tar -xjf 压缩文件

## 8, 网络命令

- 给用户发消息

> write 用户名<br>
> Ctrl + D 保存结束

- 发广播信息

> wall 消息内容

- 查看发送电子邮件

> mail 用户名

- 列出目前与过去登录信息的用户信息 `last`

- 查看某特定用户上次登录时间 `lastlog`

- 显示数据包到主机间的路径 `traceroute 例如 traceroute www.baidu.com`

- 显示网络相关信息

> netstat [选项]<br>
> -t TCP 协议<br>
> -u UDP协议<br>
> -l 监听<br>
> -r 路由<br>
> -n 显示IP地址和端口号

- 挂载命令

> mount [-t 文件系统] 设备文件名 挂载点<br>
> 范例: mount -t iso9660 /dev/sr0 /mnt/cdrom<br>
> 卸载 umount

## 9,关机重启

- 关机

> shutdown [选项] 时间<br>
> -c 取消前一个关机命令<br>
> -h 关机<br>
> -r 重启<br>
> 范例: shutdown -h now (立即关机)

- 重启

> reboot<br>
> init 6

# 3, 用户和用户组

## 1, 用户配置文件

- 用户信息文件 /etc/passwd

> 第一字段: 用户名称<br>
> 第二字段: 密码标志<br>
> 第三字段: UID(用户ID)<br>
> 0: 超级用户<br>
> 1-499: 系统用户(伪用户)<br>
> 500-65535: 普通用户<br>
> 第四字段: GID(用户初始组ID)<br>
> 第五字段: 用户说明<br>
> 第六字段: 家目录<br>
> 第七字段: 登录之后的shell

- 影子文件 /etc/shadow

> 第一字段: 用户名<br>
> 第二字段: 加密密码<br>
> 第三字段: 密码最后一次修改时间<br>
> 第四字段: 两次密码修改的间隔时间<br>
> 第五字段: 密码有效期<br>
> 第六字段: 密码修改到期前的警告天数<br>
> 第七字段: 密码过期后的宽限天数<br>
> 0: 代表密码过期后立即失效<br>
> -1: 代表密码永久不会失效<br>
> 第八字段: 账号失效时间<br>
> 第九字段: 保留

- 组信息文件 /etc/group

> 第一字段: 组名<br>
> 第二字段: 组密码标志<br>
> 第三字段: GID<br>
> 第四字段: 组中附加用户

- 组密码文件 /etc/gshadow

> 第一字段: 组名<br>
> 第二字段: 组密码<br>
> 第三字段: 组管理员用户名<br>
> 第四字段: 组中附加用户

## 2, 用户管理命令

- 用户添加

> useradd [选项] 用户名<br>
> -u UID: 手工指定用户的UID号<br>
> -d 家目录: 手工指定用户的家目录<br>
> -c 用户说明 手工指定用户的说明<br>
> -g 组名: 手工指定用户的初始组<br>
> -G 组名: 指定用户的附加组<br>
> -s shell: 手工制定用户的登录shell, 默认是/bin/bash

- 修改用户密码

> passwd [选项] 用户名<br>
> -S 查询用户密码的密码状态, 仅root用户可用<br>
> -l 暂时锁定用户, 仅root用户可用<br>
> -u 解锁用户, 仅root用户可用<br>
> --stdin 可以通过管道符输出的数据作为用户的密码

- 修改用户信息

> usermod [选项] 用户名<br>
> -u UID: 修改用户的UID号<br>
> -c 用户说明: 修改用户说明<br>
> -G 组名: 修改用户的附加组<br>
> -L: 临时锁定用户<br>
> -U: 解锁用户锁定

- 修改用户密码状态

> chage [选项] 用户名<br>
> -l: 列出用户的详细密码状态<br>
> -d 日期: 修改密码最后一次更改日期<br>
> -m 天数: 两次密码修改间隔<br>
> -M 天数: 密码有效期<br>
> -I 天数: 密码过后宽限天数<br>
> -E 日期: 账号失效时间

- 删除用户

> userdel [-r] 用户名<br>
> -r 删除用户的同时删除用户的家目录

- 查看用户ID `id 用户名`

- 用户切换

> su [选项] 用户名<br>
> -: 只是用'-'代表连带用户的环境变量一起切换<br>
> -c 命令: 仅执行一次命令,而不切换用户身份

## 3, 用户组管理命令

- 添加用户组

> groupadd [选项] 组名<br>
> -g GID: 指定组id

- 修改用户组

> groupmod [选项] 组名<br>
> -g GID: 修改组ID<br>
> -n 新组名: 修改组名

- 删除用户组

> groupdel 组名

- 将用户加入组或从组中删除

> gpasswd 选项 组名<br>
> -a 用户名: 把用户加入组<br>
> -d 用户名: 把用户从组中删除

# 4, 权限管理

# 5, 文件系统管理

# 6，shell命令

## 1，shell基础

### 1， 执行方法

1.  赋予执行权限，直接运行

> chmod 755 脚本文件<br>
> 使用相对路径或绝对路径运行脚本文件

2.  通过Bash调用执行脚本

> bash 脚本文件

### 2， 基本命令

-   输出命令

> echo [选项] [输出内容]<br>
> -e 支持反斜线支持的字符转换

-   在文件中搜索符合条件的字符串

> grep [选项] "搜索内容" 文件名 <br>
> -i 忽略大小写<br>
> -n 输出行号<br>
> -v 反向查找<br>
> --color==auto 搜索出的关键字用颜色显示

### 3, 命令的别名和快捷键

-   别名

    -   设定命令别名(临时性) `alias 别名='原命令'`

    -   查询别名 `alias`

    -   别名永久生效： 修改相对用户下的`.bashrc`文件

    -   删除别名：`unalias 别名`

### 4, 多命令顺序执行

| 多命令执行符号 | 格式 | 作用 |
|---------|---------|---------|
| ； | 命令1 ; 命令2 | 多个命令顺序执行多个命令之间没有任何联系|
| &&    | 命令1 && 命令2 | 逻辑与<br>当命令1正确执行命令2才会执行<br>当命令1未正确执行，命令2不执行|
| \|\| | 命令1 \|\| 命令2 | 逻辑或<br>当命令1执行不正确，命令2才会执行<br> 当命令1正确执行，命令2则不会执行 |

-   管道符 ` | `,格式： `命令1 | 命令2`，将命令1的正确输出作为命令2的操作对象 